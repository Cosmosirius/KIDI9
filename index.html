<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EmoLife - Mood & Life Tracker</title>
  <style>
    :root {
      --primary: #e76f51;
      --accent: #2a9d8f;
      --bg: #fdf6f0;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      margin: 0;
      padding: 20px;
      color: #333;
    }

    h1, h2 {
      color: var(--primary);
    }

    .card {
      background: white;
      padding: 15px;
      border-radius: 16px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      transition: background 0.3s ease;
    }

    label, select, input, textarea {
      display: block;
      width: 100%;
      margin: 8px 0;
      font-size: 1em;
    }

    button {
      background: var(--accent);
      color: white;
      border: none;
      padding: 10px 14px;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 8px;
    }

    button:hover {
      background: #21867a;
    }

    .mood-happy    { background-color: #fef8ec; }
    .mood-sad      { background-color: #f2f0fa; }
    .mood-angry    { background-color: #fcebea; }
    .mood-sleepy   { background-color: #edf6f9; }
    .mood-anxious  { background-color: #fff4e6; }

    @media (max-width: 600px) {
      body { padding: 10px; }
      button { width: 100%; }
    }

    .history {
      font-size: 0.9em;
      color: #444;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <h1>üß† EmoLife</h1>

  <div class="card" id="moodCard">
    <h2>‚ú® Mood Journal Hari Ini</h2>
    <label for="mood">Mood Kamu:</label>
    <select id="mood">
      <option value="üòä">üòä Bahagia</option>
      <option value="üò¢">üò¢ Sedih</option>
      <option value="üò°">üò° Marah</option>
      <option value="üò¥">üò¥ Lelah</option>
      <option value="üò±">üò± Cemas</option>
    </select>

    <label for="activity">Aktivitasmu hari ini:</label>
    <textarea id="activity" rows="2" placeholder="Contoh: Belajar JS, nonton film..."></textarea>

    <button onclick="saveMood()">Simpan Mood</button>
    <div class="history" id="history"></div>
  </div>

  <div class="card">
    <h2>üîÆ Kata Ajaib:</h2>
    <p id="magicQuote">‚Äî</p>
  </div>

  <div class="card">
    <h2>üé¨ Rekomendasi Film:</h2>
    <p id="recommendation">‚Äî</p>
  </div>

  <div class="card">
    <h2>üìä Statistik Mood Mingguan</h2>
    <ul id="stats"></ul>
  </div>

  <div class="card">
    <h2>‚è≥ Hitung Umur & Waktu Hidup</h2>
    <label for="birth">Tanggal Lahir:</label>
    <input type="date" id="birth"/>
    <button onclick="calculateLife()">Hitung</button>
    <div id="lifeResult"></div>
  </div>

  <script>
    const quotes = new Map([
      ["üòä", "Tetap tersenyum, dunia ikut bahagia!"],
      ["üò¢", "Tak apa bersedih, besok akan lebih baik."],
      ["üò°", "Tarik napas... Kamu bisa kendalikan ini."],
      ["üò¥", "Istirahat itu penting, tubuhmu butuh kasih sayang."],
      ["üò±", "Tenang... semua akan berlalu."]
    ]);

    const movieSuggestions = new Map([
      ["üòä", ["Sing 2", "Coco", "Zootopia"]],
      ["üò¢", ["Inside Out", "A Silent Voice", "Five Feet Apart"]],
      ["üò°", ["Kung Fu Panda", "The Pursuit of Happyness"]],
      ["üò¥", ["Our Planet", "Kiki‚Äôs Delivery Service"]],
      ["üò±", ["Soul", "Encanto"]]
    ]);

    const moodLog = new Map();

    function saveMood() {
      const mood = document.getElementById("mood").value;
      const activity = document.getElementById("activity").value.trim();
      const today = new Date().toISOString().split('T')[0];

      moodLog.set(today, { mood, activity });

      // Magic quote & movie
      document.getElementById("magicQuote").textContent = quotes.get(mood) ?? "Kamu luar biasa!";
      const filmList = movieSuggestions.get(mood);
      document.getElementById("recommendation").textContent =
        filmList[Math.floor(Math.random() * filmList.length)];

      // Warna background by mood
      const moodCard = document.getElementById("moodCard");
      moodCard.className = "card mood-" + getMoodClass(mood);

      // Update history
      document.getElementById("history").textContent = `Tersimpan: ${mood} - "${activity}"`;

      // Update statistik
      updateStats();
    }

    function getMoodClass(mood) {
      return {
        "üòä": "happy",
        "üò¢": "sad",
        "üò°": "angry",
        "üò¥": "sleepy",
        "üò±": "anxious"
      }[mood] || "";
    }

    function updateStats() {
      const stats = {};
      for (let [_, data] of moodLog.entries()) {
        stats[data.mood] = (stats[data.mood] || 0) + 1;
      }

      const statEl = document.getElementById("stats");
      statEl.innerHTML = Object.entries(stats).map(([mood, count]) =>
        `<li>${mood}: ${count}x</li>`).join('');
    }

    function calculateLife() {
      const birth = new Date(document.getElementById("birth").value);
      const today = new Date();

      if (isNaN(birth)) {
        alert("Masukkan tanggal lahir dengan benar.");
        return;
      }

      const days = Math.trunc((today - birth) / (1000 * 60 * 60 * 24));
      const years = Math.trunc(days / 365.25);
      const months = Math.trunc((days % 365.25) / 30.44);
      const sleepDays = Math.trunc(days / 3);
      const ytHours = days;
      const productive = days - sleepDays - (ytHours / 24);

      const result = `
        <p>Umur kamu: <strong>${years} tahun ${months} bulan</strong></p>
        <p>Total hari hidup: <strong>${days}</strong></p>
        <p>Waktu tidur: ~<strong>${sleepDays}</strong> hari</p>
        <p>Nonton YouTube (1 jam/hari): ~<strong>${ytHours}</strong> jam</p>
        <p>Hari produktif: ~<strong>${Math.trunc(productive)}</strong></p>
      `;
      document.getElementById("lifeResult").innerHTML = result;
    }
  </script>
</body>
</html>
